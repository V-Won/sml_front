<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initiainclude-htmll-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi">
  <title>삼광의료재단</title>
  <!-- favicon -->
  <link rel="icon" type="image/svg+xml" href="../static/images/logo/favicon.svg">
  <link rel="shortcut icon" type="image/x-icon" href="../static/images/logo/favicon.ico" />
  <link rel="stylesheet" href="../static/css/style.css"><!-- 공통 css -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" /><!-- swiper css -->
</head>

<body id="main">

  <!-- header -->
  <div include-html="static/include/header.html" data-include="header"></div>
  <!-- //header -->

  <!-- box-wrap -->
  <div class="box-wrap">
    <!-- inner-wrap -->
    <div class="inner-wrap">
      <!-- sub-top -->
      <div class="sub-top"
        style="background: url(../static/images/@/sub_top_A.png) no-repeat; background-position: 61%">
        <div class="inner-gap-1">
          <div class="text-box">
            <ul class="sub-nav-2">
              <li>
                <a href="#none">검사부 안내</a>
              </li>
              <li>
                <a href="#none">정도관리</a>
              </li>
              <li class="nav-acc" data-event="commonSelectBox">
                <a href="#none" class="button">인증내역</a>
                <ul class="list">
                  <!-- hover시 font-weight 문제로 title 사용 -->
                  <li><a href="#none" title="정도관리 개요">정도관리 개요</a></li>
                  <li><a href="#none" title="인증내역">인증내역</a></li>
                </ul>
              </li>
            </ul>
            <h3 class="sub-tit">인증내역</h3>
          </div>
        </div>
      </div>
      <!-- //sub-top -->

      <div class="inner-gap-1" style="display: flex;gap:10px;flex-wrap: wrap;">
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="임상화학"><span>임상화학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="요화학"><span>요화학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="혈액학"><span>혈액학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="면역학"><span>면역학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="핵의학"><span>핵의학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="특수화학"><span>특수화학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="미생물학"><span>미생물학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="분자미생물학"><span>분자미생물학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="분자유전학"><span>분자유전학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="세포유전학"><span>세포유전학</span></button>
        <button type="button" class="common-btnType-1 view-btn" data-event="layerOpen" data-layerId="ly-1"
          data-text="검체관리"><span>검체관리</span></button>
      </div>
    </div>
    <!-- //inner-wrap -->
  </div>
  <!-- //box-wrap -->

  <!-- footer -->
  <div include-html="static/include/footer.html" data-include="footer"></div>
  <!-- //footer -->

  <!-- 검체용기 일람 레이어 팝업 -->
  <div class="box-layer layer-video request" id="ly-1"><!-- 비디오 레이어 팝업 class="layer-video" -->
    <div class="inner-layer absol" tabindex="0">
      <div class="gap" style="max-width: 800px;"><!-- max-width 설정 -->
        <div class="box" style="max-height: fit-content;">
          <!-- inspect-item-swiper -->
          <div class="inspect-item-swiper">
            <div class="common-tab type-2" data-event="commonTab">
              <div class="swiper-container snbSwiper type-2">
                <ul class="list swiper-wrapper"></ul>
              </div>
            </div>
            <div class="swiper mySwiper1">
              <div class="swiper-wrapper"></div>
              <div class="swiper-button-prev"></div>
              <div class="swiper-button-next"></div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <!-- //inspect-item-swiper -->
        </div>
        <button data-event="layerClose"></button>
      </div>
    </div>
    <div class="verticalAlign"></div>
  </div>
  <!-- //검체용기 일람 레이어 팝업 -->

  <!-- 공통 js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1/bundled/lenis.min.js"></script>
  <script src="../static/js/includeHTML.js"></script>
  <script src="../static/js/front.js"></script>
  <!-- //공통 js -->

  <!-- swiper.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.js"></script>
  <!-- //swiper.js -->

  <script>
    /**
     * header bg type
     *  transparent
     *  white
    */
    headerBg({
      bg: "transparent"
    })
    selectBox.initialize();
    layerPopup.initialize();

     // 레이어 팝업 > 상단 tab
    var swiper2 = new Swiper('.snbSwiper.type-2', {
      slidesPerView: 'auto',
      preventClicks: true,
      loop: false,
      preventClicksPropagation: false,
      observer: true,
      observeParents: true,
      thumbs: {
        swiper: swiper1,
      },
    });

    // 레이어 팝업 > 상단 본문 이미지
    var swiper1 = new Swiper(".mySwiper1", {
      spaceBetween: 20,
      loop: false,
      loopedSlides: 1,
      slidesPerView: 1,
      autoHeight: true,
      observer: true,
      observeParents: true,
      thumbs: {
        swiper: swiper2,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      pagination: {
        el: ".swiper-pagination",
        type: "fraction",
      },
      on: {
        slideChange: function (index) {
          var go = swiper1.realIndex;

          swiper2.slideTo(go);
        },
      }
    });

    // event reset
    const actionEvent = () => {
      swiper2.update();
      swiper1.update();
    }

    // 레이어 팝업 > 상단 tab click
    var $snbSwiperItem2 = $('.snbSwiper.type-2 .swiper-wrapper .swiper-slide .btn');
    $snbSwiperItem2.click(function () {
      var target2 = $(this).parent();
      $snbSwiperItem2.parent().removeClass('is-active');
      target2.addClass('is-active');
    })

    window.addEventListener('resize', () => {
      actionEvent();
    })

    window.addEventListener('load', () => {
      if (window.innerWidth <= 1024) {
        actionEvent();
      }
    })

    document.querySelectorAll('.view-btn').forEach((e) => {
      e.addEventListener('click', (item) => {
        actionEvent();

        swiper2.slideTo(0);
        swiper1.slideTo(0);
      })
    })

    // 상품 json
    /**
     * 엑셀 > json 파일 변환 사이트.
     * https://products.aspose.app/cells/ko/conversion/excel-to-json
    */
    var requestURL = "../static/js/list_product.json";
    var request = new XMLHttpRequest();
    request.open("GET", requestURL);
    request.responseType = "json";
    request.send();

    // json
    document.querySelectorAll('[data-event="layerOpen"]').forEach((e) => {
      e.addEventListener('click', (item) => {
        let name = item.currentTarget.getAttribute('data-text');
        var updt = request.response;

        swiper2.removeAllSlides();
        swiper1.removeAllSlides();

        let cnt = 0; // data-index 리셋 카운트
        const tt = "전체";

        for (var i = 0; i < updt[tt].length; i++) {
          if (name == updt[tt][i]["분야2"]) {
            cnt++;

            let img = updt[tt][i]["img"],
              text1 = updt[tt][i]["장비명"],
              text2 = updt[tt][i]["제조사"],
              text3 = updt[tt][i]["용도"];

            let tab = document.createElement('li'), // 레이어 팝업 상단 tab
                content = document.createElement('div'); // 레이어 팝업 본문 이미지

            // tab 랜더링
            tab.innerHTML = `
                <a href="#none" class="btn">${text1}</a>
              `;
            tab.classList.add('swiper-slide');
            document.querySelector('.snbSwiper .swiper-wrapper').appendChild(tab);

            // 본문 랜더링
            content.innerHTML = `
                <div class="img-box">
                  <div class="img-holder">
                    <span>
                      <img src="../static/images/equipment/${img}">
                    </span>
                  </div>
                </div>
                <p class="name">${text1}</p>
                <div class="text-box">
                  <div class="flex">
                    <p class="title">제조사</p>
                    <p class="info">${text2}</p>
                  </div>
                  <div class="flex">
                    <p class="title">용도</p>
                    <p class="info">${text3}</p>
                  </div>
                </div>
              `;
            content.classList.add('swiper-slide');
            content.dataset.index = `${cnt}`;
            document.querySelector('.mySwiper1 .swiper-wrapper').appendChild(content);
          }
        }

        actionEvent();
      });
    });
    // //상품 json
  </script>

</body>

</html>